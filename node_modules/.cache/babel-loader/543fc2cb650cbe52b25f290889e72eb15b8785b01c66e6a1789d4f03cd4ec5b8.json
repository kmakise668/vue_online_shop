{"ast":null,"code":"import vCartItem from './v-cart-item';\nimport { CheckCircleIcon, ShoppingCartIcon } from \"@heroicons/vue/outline\";\nimport { mapActions, mapGetters } from 'vuex';\nexport default {\n  name: 'v-cart',\n  components: {\n    vCartItem,\n    ShoppingCartIcon,\n    CheckCircleIcon\n  },\n  props: {\n    cart_data: {\n      type: Array,\n      default() {\n        return [];\n      }\n    }\n  },\n  emits: ['update:cart_item_data'],\n  data() {\n    return {};\n  },\n  computed: {\n    ...mapGetters(['CART']),\n    // cartTotalCost() {\n    //     let result = []\n\n    //     if (this.CART.length) {\n    //         for (let item of this.CART) {\n    //         result.push(item.price * item.quantity)\n    //     }\n    //     result =   result.reduce(function(sum, el) {\n    //        sum + el;\n    //     })       \n    //     return result;\n    //     }else {\n    //         return 0\n    //     }\n\n    // }\n    cartTotalCost() {\n      return this.CART.map(el => Math.floor(el.price.replace(/\\s/g, '')) * el.quantity).reduce((acc, el) => acc = acc + el, 0);\n      // return this.CART\n    }\n  },\n\n  methods: {\n    ...mapActions(['DELETE_FROM_CART', 'INCREMENT_CART_ITEM', 'DECREMENT_CART_ITEM']),\n    updateCartItemData(newData) {\n      const cart_item_data = this.cart_data.find(item => item.id === newData.id);\n      cart_item_data.quantity = 1;\n      this.$emit('update:cart_item_data', cart_item_data);\n\n      // Сохраняем обновленные данные корзины в localStorage\n      localStorage.setItem('cart', JSON.stringify(this.CART));\n    },\n    deleteFromCart(index) {\n      this.DELETE_FROM_CART(index);\n      localStorage.setItem('cart', JSON.stringify(this.CART));\n    },\n    increment(index) {\n      this.INCREMENT_CART_ITEM(index);\n      localStorage.setItem('cart', JSON.stringify(this.CART));\n    },\n    decrement(index) {\n      this.DECREMENT_CART_ITEM(index);\n      localStorage.setItem('cart', JSON.stringify(this.CART));\n    }\n  },\n  watch: {},\n  mounted() {}\n};","map":{"version":3,"names":["vCartItem","CheckCircleIcon","ShoppingCartIcon","mapActions","mapGetters","name","components","props","cart_data","type","Array","default","emits","data","computed","cartTotalCost","CART","map","el","Math","floor","price","replace","quantity","reduce","acc","methods","updateCartItemData","newData","cart_item_data","find","item","id","$emit","localStorage","setItem","JSON","stringify","deleteFromCart","index","DELETE_FROM_CART","increment","INCREMENT_CART_ITEM","decrement","DECREMENT_CART_ITEM","watch","mounted"],"sources":["/Users/dev/Desktop/vue /src/components/cart/v-cart.vue"],"sourcesContent":["<template>\n<div class=\"v-cart\">\n\n     <div v-if=\"!CART.length\" class=\"text-center my-auto flex flex-col items-center justify-center h-[70vh]\">\n        <div class=\"relative mb-4\">\n            <ShoppingCartIcon class=\" w-36 flex items-center text-gray-200  mx-auto justify-center \"  />\n            <div class=\"absolute w-12 h-12 text-white flex items-center font-bold text-2xl justify-center bg-blue-200 rounded-full top-0 right-0\">0</div>\n        </div>\n        <div class=\"text-3xl mb-2 font-bold\">Корзина пуста</div>\n        <div class=\"text-gray-600 text-md \">Для заказа добавьте товары в корзину</div>\n        <router-link  :to=\"`/catalog`\">\n                   <button class=\"btn v-catalog-item__add_to_cart mx-auto z-2 relative flex  justify-center rounded-md bg-blue-600 px-8 py-3 mt-10 text-md font-semibold leading-6 text-white shadow-sm transition duration-300 hover:bg-blue-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600\">Каталог товаров</button>\n                </router-link>\n    </div>\n    <div v-else >\n        <h2 class=\"text-3xl mb-4 font-bold tracking-tight text-gray-900\">Корзина</h2>\n    <p class=\"text-gray-500 font-normal text-sm mb-12\">Lorem, ipsum dolor sit amet consectetur adipisicing elit. <br /> Quidem architecto atque maiores praesentium aliquid ea laborum quisquam vero! Laborum, aut.</p>\n    <vBreadcrumbs />\n   \n    <div class=\"flex items-start\">\n        <div class=\"flex-1 bg-white \">\n            <div class=\"v-cart-item  z-10 bg-white uppercase text-sm font-medium tracking-wider text-gray-500 flex py-6 px-10 items-center border-b border-gray-200 border-solid \">\n\n                <div class=\"w-1/2 mr-20\">\n                    Наименование\n                </div>\n                <div class=\" mr-10 w-36\">\n                    Количество\n                </div>\n                <div class=\"ml-auto\">\n                    Действие\n                </div>\n\n            </div>\n\n            <v-cart-item v-for=\"(item, index) in CART\" :key=\"item.id\" :cart_item_data=\"item\" @update:cart_item_data=\"item\" @deleteFromCart=\"deleteFromCart(index)\" @increment=\"increment(index)\" @decrement=\"decrement(index)\" />\n\n        </div>\n        <div class=\"v-cart__total group flex-2 overflow-hidden w-80 ml-8 sticky top-24 shadow-sm border-gray-100  border-2 bg-white h-auto py-6 rounded-md\">\n            <div class=\"border-b border-solid border-gray-200 px-6 pb-6 text-gray-700  text-2xl font-medium\">\n                Условия заказа:\n            </div>\n            <CheckCircleIcon class=\"absolute z-[-10] top-[-40px] w-[8rem] text-blue-50 right-[-40px] transform scale-1 transition duration-300 group-hover:scale-75\" />\n            <div class=\"relative px-6 pt-6\">\n                <div class=\"flex items-end mb-5\">\n                    <div class=\"text-gray-600\">Количество:</div>\n                    <div class=\"w-full border-dashed mb-1 border-stone-300 border-b\"></div>\n                    <div  class=\"text-gray-700 font-bold text-md inline-block whitespace-nowrap\">{{ CART.length }} шт.</div>\n                </div>\n                <div  class=\"flex items-end\">\n                    <div class=\"text-gray-600\">\n                        Итого:\n                    </div>\n                    <div class=\"w-full border-dashed mb-1 border-stone-300 border-b\"></div>\n                    <div class=\"text-gray-700 font-bold text-xl inline-block whitespace-nowrap\">{{ cartTotalCost  }} тг.</div>\n                </div>\n                <router-link  :to=\"`/order`\">\n                   <button class=\"btn v-catalog-item__add_to_cart z-2 relative flex w-full justify-center rounded-md bg-blue-600 px-3 py-2 mt-8 text-sm font-semibold leading-6 text-white shadow-sm transition duration-300 hover:bg-blue-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600\">Оформить заказ</button>\n                </router-link>\n            </div>\n        </div>\n    </div>\n\n    </div>\n</div>\n</template>\n\n<script>\nimport vCartItem from './v-cart-item'\n\nimport {\n    CheckCircleIcon,ShoppingCartIcon\n} from \"@heroicons/vue/outline\";\nimport {\n    mapActions,\n    mapGetters\n} from 'vuex'\n\nexport default {\n    name: 'v-cart',\n    components: {\n        vCartItem,\n        ShoppingCartIcon,\n\n        CheckCircleIcon\n    },\n    props: {\n        cart_data: {\n            type: Array,\n            default () {\n                return []\n            }\n        }\n    },\n    emits: ['update:cart_item_data'],\n    data() {\n        return {\n\n        }\n    },\n    computed: {\n        ...mapGetters([\n            'CART'\n        ]),\n        // cartTotalCost() {\n        //     let result = []\n\n        //     if (this.CART.length) {\n        //         for (let item of this.CART) {\n        //         result.push(item.price * item.quantity)\n        //     }\n        //     result =   result.reduce(function(sum, el) {\n        //        sum + el;\n        //     })       \n        //     return result;\n        //     }else {\n        //         return 0\n        //     }\n\n        // }\n        cartTotalCost() {\n            return this.CART.map(el => Math.floor(el.price.replace(/\\s/g, '')) * el.quantity).reduce((acc, el) => acc = acc + el, 0);\n            // return this.CART\n        }\n\n    },\n    methods: {\n        ...mapActions([\n            'DELETE_FROM_CART',\n            'INCREMENT_CART_ITEM',\n            'DECREMENT_CART_ITEM',\n\n        ]),\n        updateCartItemData(newData) {\n            const cart_item_data = this.cart_data.find((item) => item.id === newData.id);\n            cart_item_data.quantity = 1;\n            this.$emit('update:cart_item_data', cart_item_data);\n\n            // Сохраняем обновленные данные корзины в localStorage\n            localStorage.setItem('cart', JSON.stringify(this.CART));\n        },\n        deleteFromCart(index) {\n            this.DELETE_FROM_CART(index)\n            localStorage.setItem('cart', JSON.stringify(this.CART));\n            \n        },\n        increment(index) {\n            this.INCREMENT_CART_ITEM(index)\n            localStorage.setItem('cart', JSON.stringify(this.CART));\n        },\n        decrement(index) {\n            this.DECREMENT_CART_ITEM(index)\n            localStorage.setItem('cart', JSON.stringify(this.CART));\n        }\n\n    },\n    watch: {\n\n    },\n    mounted() {}\n}\n</script>\n\n<style></style>\n"],"mappings":"AAoEA,OAAOA,SAAQ,MAAO,eAAc;AAEpC,SACIC,eAAe,EAACC,gBAAe,QAC5B,wBAAwB;AAC/B,SACIC,UAAU,EACVC,UAAS,QACN,MAAK;AAEZ,eAAe;EACXC,IAAI,EAAE,QAAQ;EACdC,UAAU,EAAE;IACRN,SAAS;IACTE,gBAAgB;IAEhBD;EACJ,CAAC;EACDM,KAAK,EAAE;IACHC,SAAS,EAAE;MACPC,IAAI,EAAEC,KAAK;MACXC,OAAMA,CAAA,EAAK;QACP,OAAO,EAAC;MACZ;IACJ;EACJ,CAAC;EACDC,KAAK,EAAE,CAAC,uBAAuB,CAAC;EAChCC,IAAIA,CAAA,EAAG;IACH,OAAO,CAEP;EACJ,CAAC;EACDC,QAAQ,EAAE;IACN,GAAGV,UAAU,CAAC,CACV,MAAK,CACR,CAAC;IACF;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACAW,aAAaA,CAAA,EAAG;MACZ,OAAO,IAAI,CAACC,IAAI,CAACC,GAAG,CAACC,EAAC,IAAKC,IAAI,CAACC,KAAK,CAACF,EAAE,CAACG,KAAK,CAACC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,IAAIJ,EAAE,CAACK,QAAQ,CAAC,CAACC,MAAM,CAAC,CAACC,GAAG,EAAEP,EAAE,KAAKO,GAAE,GAAIA,GAAE,GAAIP,EAAE,EAAE,CAAC,CAAC;MACxH;IACJ;EAEJ,CAAC;;EACDQ,OAAO,EAAE;IACL,GAAGvB,UAAU,CAAC,CACV,kBAAkB,EAClB,qBAAqB,EACrB,qBAAqB,CAExB,CAAC;IACFwB,kBAAkBA,CAACC,OAAO,EAAE;MACxB,MAAMC,cAAa,GAAI,IAAI,CAACrB,SAAS,CAACsB,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACC,EAAC,KAAMJ,OAAO,CAACI,EAAE,CAAC;MAC5EH,cAAc,CAACN,QAAO,GAAI,CAAC;MAC3B,IAAI,CAACU,KAAK,CAAC,uBAAuB,EAAEJ,cAAc,CAAC;;MAEnD;MACAK,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAAC,IAAI,CAACrB,IAAI,CAAC,CAAC;IAC3D,CAAC;IACDsB,cAAcA,CAACC,KAAK,EAAE;MAClB,IAAI,CAACC,gBAAgB,CAACD,KAAK;MAC3BL,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAAC,IAAI,CAACrB,IAAI,CAAC,CAAC;IAE3D,CAAC;IACDyB,SAASA,CAACF,KAAK,EAAE;MACb,IAAI,CAACG,mBAAmB,CAACH,KAAK;MAC9BL,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAAC,IAAI,CAACrB,IAAI,CAAC,CAAC;IAC3D,CAAC;IACD2B,SAASA,CAACJ,KAAK,EAAE;MACb,IAAI,CAACK,mBAAmB,CAACL,KAAK;MAC9BL,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAAC,IAAI,CAACrB,IAAI,CAAC,CAAC;IAC3D;EAEJ,CAAC;EACD6B,KAAK,EAAE,CAEP,CAAC;EACDC,OAAOA,CAAA,EAAG,CAAC;AACf"},"metadata":{},"sourceType":"module","externalDependencies":[]}