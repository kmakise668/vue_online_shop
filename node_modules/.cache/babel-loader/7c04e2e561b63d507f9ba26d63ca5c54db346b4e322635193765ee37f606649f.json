{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { mapGetters, mapMutations } from 'vuex';\nexport default {\n  data() {\n    return {\n      name: '',\n      password: '',\n      email: '',\n      registrationMessage: '',\n      phone: this.phone,\n      role: 0 // Переменная для хранения сообщения о регистрации\n    };\n  },\n\n  methods: {\n    ...mapMutations(['SET_AUTH', 'SET_ROLE']),\n    async registerUser(event) {\n      event.preventDefault();\n      try {\n        const response = await axios.post('http://localhost:7676/api/users', {\n          name: this.name,\n          password: this.password,\n          email: this.email,\n          phone: this.phone,\n          role: '0'\n        });\n\n        // В данном случае, сервер возвращает только сообщение об успешной регистрации, без данных о роли\n        // Если сервер вернул данные о роли, раскомментируйте следующие строки для сохранения роли через Vuex\n        // const { role } = response.data;\n        this.SET_AUTH(true);\n        localStorage.setItem('role', 0);\n\n        // Вместо сохранения роли через Vuex, просто перенаправим пользователя на страницу /dashboard\n        this.$router.push('/dashboard');\n        this.registrationMessage = response.data.message; // Сохранение сообщения в переменной\n        console.log(response.data.message);\n      } catch (error) {\n        this.registrationMessage = error.response.data.message; // Сохранение сообщения об ошибке в переменной\n        console.log(error.response.data.message);\n      }\n    }\n  },\n  computed: {\n    ...mapGetters(['isAuthenticated'])\n  }\n};","map":{"version":3,"names":["axios","mapGetters","mapMutations","data","name","password","email","registrationMessage","phone","role","methods","registerUser","event","preventDefault","response","post","SET_AUTH","localStorage","setItem","$router","push","message","console","log","error","computed"],"sources":["/Users/dev/Desktop/vue /src/components/register/v-register.vue"],"sourcesContent":["<!-- <template>\n  <form @submit=\"registerUser\">\n    <input type=\"text\" v-model=\"name\" placeholder=\"Name\" required>\n    <input type=\"password\" v-model=\"password\" placeholder=\"Password\" required>\n    <input type=\"email\" v-model=\"email\" placeholder=\"Email\">\n    <button type=\"submit\">Register</button>\n    <p>{{ registrationMessage }}</p>\n  </form>\n</template> -->\n\n<template>\n  <div class=\"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8\">\n    <div class=\"sm:mx-auto sm:w-full sm:max-w-sm\">\n  \n      <h2 class=\"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900\">Зарегистрируйте свой аккаунт</h2>\n    </div>\n\n    <div class=\"mt-10 sm:mx-auto sm:w-full sm:max-w-sm\">\n      <form class=\"space-y-6\" action=\"#\" @submit=\"registerUser\">\n        <div>\n          <label for=\"name\" class=\"block text-sm font-medium leading-6 text-gray-900\">Ваше имя</label>\n          <div class=\"\">\n            <input id=\"name\" name=\"name\" type=\"text\" autocomplete=\"name\" v-model=\"name\" required=\"\" class=\"block w-full rounded-md border-0 py-1.5  px-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\" />\n          </div>\n        </div>\n        <div>\n          <label for=\"email\" class=\"block text-sm font-medium leading-6 text-gray-900\">Email адрес</label>\n          <div class=\"\">\n            <input id=\"email\" name=\"email\" type=\"email\" autocomplete=\"email\" v-model=\"email\" required=\"\" class=\"block w-full rounded-md border-0 py-1.5  px-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\" />\n          </div>\n        </div>\n        <div>\n          <label for=\"phone\" class=\"block text-sm font-medium leading-6 text-gray-900\">Номер телефона</label>\n          <div class=\"\">\n            <input id=\"phone\" name=\"phone\" type=\"text\" autocomplete=\"phone\" v-model=\"phone\" required=\"\" class=\"block w-full rounded-md border-0 py-1.5  px-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\" />\n          </div>\n        </div>\n\n        <div>\n          <div class=\"flex items-center justify-between\">\n            <label for=\"password\" class=\"block text-sm font-medium leading-6 text-gray-900\">Пароль</label>\n         \n          </div>\n          <div class=\"\">\n            <input id=\"password\" name=\"password\" type=\"password\" v-model=\"password\" autocomplete=\"current-password\" required=\"\" class=\"block w-full rounded-md border-0 py-1.5 px-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\" />\n          </div>\n        </div>\n\n        <div>\n          <button type=\"submit\" class=\"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\">Зарегистрироваться</button>\n        </div>\n      </form>\n      <p class=\"mt-10 text-center font-semibold leading-6 text-indigo-600 hover:text-indigo-500\">{{ registrationMessage }}</p>\n      <router-link to=\"/login\">\n      <p class=\"mt-4 text-center font-medium text-sm leading-6 text-gray-400 hover:text-indigo-500\">Уже есть аккаунт?</p>\n </router-link>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nimport { mapGetters, mapMutations } from 'vuex';\n\nexport default {\n  data() {\n    return {\n      name: '',\n      password: '',\n      email: '',\n      registrationMessage: '',\n      phone: this.phone,\n      role: 0    // Переменная для хранения сообщения о регистрации\n    };\n  },\n  methods: {\n\n    ...mapMutations(['SET_AUTH', 'SET_ROLE']), \n    async registerUser(event) {\n  event.preventDefault();\n  try {\n    const response = await axios.post('http://localhost:7676/api/users', {\n      name: this.name,\n      password: this.password,\n      email: this.email,\n      phone: this.phone,\n      role: '0'\n    });\n \n    // В данном случае, сервер возвращает только сообщение об успешной регистрации, без данных о роли\n    // Если сервер вернул данные о роли, раскомментируйте следующие строки для сохранения роли через Vuex\n    // const { role } = response.data;\n    this.SET_AUTH(true);\n    localStorage.setItem('role', 0);\n   \n\n    // Вместо сохранения роли через Vuex, просто перенаправим пользователя на страницу /dashboard\n    this.$router.push('/dashboard');\n\n    this.registrationMessage = response.data.message; // Сохранение сообщения в переменной\n    console.log(response.data.message);\n  } catch (error) {\n    this.registrationMessage = error.response.data.message; // Сохранение сообщения об ошибке в переменной\n    console.log(error.response.data.message);\n  }\n}\n\n  },\n  computed: {\n    ...mapGetters(['isAuthenticated']) \n    },\n};\n</script>\n"],"mappings":";AA6DA,OAAOA,KAAI,MAAO,OAAO;AAEzB,SAASC,UAAU,EAAEC,YAAW,QAAS,MAAM;AAE/C,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE,EAAE;MACRC,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE,EAAE;MACTC,mBAAmB,EAAE,EAAE;MACvBC,KAAK,EAAE,IAAI,CAACA,KAAK;MACjBC,IAAI,EAAE,EAAK;IACb,CAAC;EACH,CAAC;;EACDC,OAAO,EAAE;IAEP,GAAGR,YAAY,CAAC,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;IACzC,MAAMS,YAAYA,CAACC,KAAK,EAAE;MAC5BA,KAAK,CAACC,cAAc,CAAC,CAAC;MACtB,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMd,KAAK,CAACe,IAAI,CAAC,iCAAiC,EAAE;UACnEX,IAAI,EAAE,IAAI,CAACA,IAAI;UACfC,QAAQ,EAAE,IAAI,CAACA,QAAQ;UACvBC,KAAK,EAAE,IAAI,CAACA,KAAK;UACjBE,KAAK,EAAE,IAAI,CAACA,KAAK;UACjBC,IAAI,EAAE;QACR,CAAC,CAAC;;QAEF;QACA;QACA;QACA,IAAI,CAACO,QAAQ,CAAC,IAAI,CAAC;QACnBC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAE,CAAC,CAAC;;QAG/B;QACA,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,YAAY,CAAC;QAE/B,IAAI,CAACb,mBAAkB,GAAIO,QAAQ,CAACX,IAAI,CAACkB,OAAO,EAAE;QAClDC,OAAO,CAACC,GAAG,CAACT,QAAQ,CAACX,IAAI,CAACkB,OAAO,CAAC;MACpC,EAAE,OAAOG,KAAK,EAAE;QACd,IAAI,CAACjB,mBAAkB,GAAIiB,KAAK,CAACV,QAAQ,CAACX,IAAI,CAACkB,OAAO,EAAE;QACxDC,OAAO,CAACC,GAAG,CAACC,KAAK,CAACV,QAAQ,CAACX,IAAI,CAACkB,OAAO,CAAC;MAC1C;IACF;EAEE,CAAC;EACDI,QAAQ,EAAE;IACR,GAAGxB,UAAU,CAAC,CAAC,iBAAiB,CAAC;EACjC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}