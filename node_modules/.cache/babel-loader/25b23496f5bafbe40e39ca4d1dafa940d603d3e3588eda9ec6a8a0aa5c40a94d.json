{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport VSelect from \"../v-select\";\nimport vCatalogItem from \"./v-catalog-item\";\nimport { CheckCircleIcon, XIcon, SearchIcon, XCircleIcon } from \"@heroicons/vue/outline\";\nimport { mapActions, mapGetters } from \"vuex\";\nexport default {\n  name: \"v-catalog\",\n  components: {\n    VSelect,\n    vCatalogItem,\n    CheckCircleIcon,\n    XIcon,\n    XCircleIcon,\n    SearchIcon\n  },\n  data() {\n    return {\n      categories: [{\n        name: \"Все\",\n        value: \"ALL\"\n      }, {\n        name: \"second\",\n        value: \"second\"\n      }, {\n        name: \"first\",\n        value: \"first\"\n      }],\n      selected: {\n        name: \"Все\",\n        value: \"ALL\"\n      },\n      sortedProducts: [],\n      minPrice: 0,\n      maxPrice: 20000,\n      searchQuery: \"\",\n      showNotification: false,\n      addedItems: []\n    };\n  },\n  computed: {\n    ...mapGetters([\"PRODUCTS\", \"CART\"]),\n    filteredProducts() {\n      let filtered = this.sortedProducts.length ? this.sortedProducts : this.PRODUCTS;\n      filtered = filtered.filter(product => product.name.toLowerCase().includes(this.searchQuery.toLowerCase()));\n      return filtered;\n    },\n    noResultsFound() {\n      return this.searchQuery.length > 0 && this.filteredProducts.length === 0;\n    }\n  },\n  methods: {\n    ...mapActions([\"GET_PRODUCTS_FROM_API\", \"ADD_TO_CART\"]),\n    setRangeSlider() {\n      if (this.minPrice > this.maxPrice) {\n        let tmp = this.maxPrice;\n        this.maxPrice = this.minPrice;\n        this.minPrice = tmp;\n      }\n      this.selected = this.categories.find(category => category.value === this.selected.value);\n      this.sortByCategories(this.selected);\n    },\n    sortByCategories(category) {\n      let vm = this;\n      if (category && category.value === \"ALL\") {\n        this.sortedProducts = [...this.PRODUCTS];\n      } else if (category) {\n        this.sortedProducts = this.PRODUCTS.filter(item => item.category === category.value);\n      }\n      this.sortedProducts = this.sortedProducts.filter(item => item.price >= vm.minPrice && item.price <= vm.maxPrice);\n      if (!category) {\n        let selectedCategory = this.categories.find(category => category.value === this.selected.value);\n        this.sortByCategories(selectedCategory);\n      }\n    },\n    addToCart(data) {\n      this.ADD_TO_CART(data); // Вызываем действие Vuex для добавления товара в корзину\n      this.showNotification = true;\n      const newItem = {\n        id: Date.now(),\n        data: data\n      };\n      this.addedItems.push(newItem);\n\n      // Сохраняем корзину в локальном хранилище\n      localStorage.setItem('cart', JSON.stringify(this.CART));\n      setTimeout(() => {\n        const index = this.addedItems.findIndex(item => item.id === newItem.id);\n        if (index !== -1) {\n          this.addedItems.splice(index, 1);\n        }\n      }, 2000);\n    },\n    dismissNotification(itemId) {\n      this.addedItems = this.addedItems.filter(item => item.id !== itemId);\n    },\n    handleSelect(option) {\n      this.selected = option;\n      this.sortByCategories(option);\n    },\n    search() {\n      this.sortByCategories(this.selected);\n    }\n  },\n  mounted() {\n    this.GET_PRODUCTS_FROM_API().then(response => {\n      if (response.data) {\n        console.log(\"Products:\", this.PRODUCTS);\n        this.sortByCategories(this.selected);\n      }\n    });\n  }\n};","map":{"version":3,"names":["VSelect","vCatalogItem","CheckCircleIcon","XIcon","SearchIcon","XCircleIcon","mapActions","mapGetters","name","components","data","categories","value","selected","sortedProducts","minPrice","maxPrice","searchQuery","showNotification","addedItems","computed","filteredProducts","filtered","length","PRODUCTS","filter","product","toLowerCase","includes","noResultsFound","methods","setRangeSlider","tmp","find","category","sortByCategories","vm","item","price","selectedCategory","addToCart","ADD_TO_CART","newItem","id","Date","now","push","localStorage","setItem","JSON","stringify","CART","setTimeout","index","findIndex","splice","dismissNotification","itemId","handleSelect","option","search","mounted","GET_PRODUCTS_FROM_API","then","response","console","log"],"sources":["/Users/dev/Desktop/vue /src/components/catalog/v-catalog.vue"],"sourcesContent":["<template>\n<div class=\"\">\n\n    <h2 class=\"text-3xl mb-4 font-bold tracking-tight text-gray-900\">Каталог товаров</h2>\n    <p class=\"text-gray-500 font-normal text-sm mb-12\">Lorem, ipsum dolor sit amet consectetur adipisicing elit. <br/> Quidem architecto atque maiores praesentium aliquid ea laborum quisquam vero! Laborum, aut.</p>\n    <vBreadcrumbs />\n\n    <div class=\"flex\">\n        <div class=\"mr-10 w-72 flex-shrink-0\">\n            <VSelect :options=\"categories\" @select=\"handleSelect\" :selected=\"selected\" />\n            <div class=\"range-slider mt-10\">\n                \n                <input type=\"range\" min=\"0\" max=\"20000\" step=\"10\" v-model.number=\"minPrice\" @change=\"setRangeSlider\" />\n                <input type=\"range\" min=\"0\" max=\"20000\" step=\"10\" v-model.number=\"maxPrice\" @change=\"setRangeSlider\" />\n            </div>\n            <div class=\"range-values flex items-center justify-between\">\n                <div class=\" mt-5  text-gray-600 border border-blue-300 text-xs font-medium rounded-md p-4  h-5 w-20 flex items-center justify-center\"> {{ minPrice }}</div>\n                <div class=\" mt-5  text-gray-600 border border-blue-300 text-xs font-medium rounded-md p-4  h-5 flex w-20  items-center justify-center\"> {{ maxPrice }}</div>\n            </div>\n        </div>\n\n        <div class=\"flex-grow \">\n            <form class=\"group relative shadow-md \">\n                <SearchIcon class=\"text-slate-500 absolute w-5 h-5 top-2.5 left-2.5\" />\n                <input class=\"focus:ring-2 focus:ring-blue-300 focus:outline-none appearance-none w-full text-sm leading-6 text-slate-900 placeholder-slate-400 rounded-md py-2 pl-10 ring-1 ring-blue-200 shadow-sm\" type=\"text\" aria-label=\"Filter projects\" placeholder=\"Поиск...\" v-model=\"searchQuery\" @input=\"search\" />\n            </form>\n            <div class=\"mt-10 grid grid-cols-1 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:gap-x-8\">\n                <vCatalogItem v-for=\"product in filteredProducts\" :key=\"product.id\" :product_data=\"product\" @addToCart=\"addToCart\" />\n                <div v-if=\"filteredProducts.length === 0\" class=\"text-gray-500 text-center bg-gray-100 py-10 flex items-center justify-center flex-col\">\n                    <XCircleIcon  class=\" w-1/5 flex items-center text-gray-400  justify-center mb-2\"  />\n                    <p class=\"\">Ничего не найдено</p>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"fixed bottom-5 right-5\">\n        <transition-group name=\"slide-right\">\n            <div v-for=\"(item, index) in addedItems\" :key=\"item.id\" :style=\"{ transitionDelay: `${index * 100}ms` }\" class=\"relative mt-3\">\n\n                <div class=\"bg-white p-4 pr-8 shadow-md flex items-center rounded-lg\">\n                    <div class=\"bg-blue-100 w-10 h-10 rounded-md flex items-center justify-center\">\n                        <CheckCircleIcon class=\"w-7 h-7 text-blue-300\" />\n                    </div>\n                    <div class=\"ml-4 mr-20 \">\n                        <router-link :to=\"{ name: 'cart' }\" class=\"font-semibold text-sm\">Корзина</router-link>\n                        <div class=\"text-xs text-gray-500\">Товар добавлен в корзину</div>\n                    </div>\n                    <button @click=\"dismissNotification(item.id)\" class=\"absolute top-5 right-5 text-gray-500 hover:text-gray-700\">\n                        <XIcon class=\"w-5 h-5 text-black-300 hover:text-red-700\" />\n                    </button>\n                </div>\n            </div>\n        </transition-group>\n    </div>\n</div>\n</template>\n\n<script>\nimport VSelect from \"../v-select\";\nimport vCatalogItem from \"./v-catalog-item\";\nimport {\n    CheckCircleIcon,\n    XIcon,\n    SearchIcon,\n    XCircleIcon\n} from \"@heroicons/vue/outline\";\nimport {\n    mapActions,\n    mapGetters\n} from \"vuex\";\n\n\nexport default {\n    name: \"v-catalog\",\n    components: {\n        VSelect,\n        vCatalogItem,\n        CheckCircleIcon,\n        XIcon,\n        XCircleIcon,\n        SearchIcon\n  \n    },\n    data() {\n        return {\n            categories: [{\n                    name: \"Все\",\n                    value: \"ALL\",\n                },\n                {\n                    name: \"second\",\n                    value: \"second\",\n                },\n                {\n                    name: \"first\",\n                    value: \"first\",\n                },\n            ],\n            selected: {\n                name: \"Все\",\n                value: \"ALL\",\n            },\n            sortedProducts: [],\n            minPrice: 0,\n            maxPrice: 20000,\n            searchQuery: \"\",\n            showNotification: false,\n            addedItems: [],\n        };\n    },\n    computed: {\n        ...mapGetters([\"PRODUCTS\", \"CART\"]),\n        filteredProducts() {\n            let filtered = this.sortedProducts.length ?\n                this.sortedProducts :\n                this.PRODUCTS;\n            filtered = filtered.filter((product) =>\n                product.name.toLowerCase().includes(this.searchQuery.toLowerCase())\n            );\n            return filtered;\n        },\n        noResultsFound() {\n            return (\n                this.searchQuery.length > 0 && this.filteredProducts.length === 0\n            );\n        },\n    },\n    methods: {\n        ...mapActions([\"GET_PRODUCTS_FROM_API\", \"ADD_TO_CART\"]),\n        setRangeSlider() {\n            if (this.minPrice > this.maxPrice) {\n                let tmp = this.maxPrice;\n                this.maxPrice = this.minPrice;\n                this.minPrice = tmp;\n            }\n            this.selected = this.categories.find(\n                (category) => category.value === this.selected.value\n            );\n            this.sortByCategories(this.selected);\n        },\n        sortByCategories(category) {\n            let vm = this;\n            if (category && category.value === \"ALL\") {\n                this.sortedProducts = [...this.PRODUCTS];\n            } else if (category) {\n                this.sortedProducts = this.PRODUCTS.filter(\n                    (item) => item.category === category.value\n                );\n            }\n            this.sortedProducts = this.sortedProducts.filter(\n                (item) => item.price >= vm.minPrice && item.price <= vm.maxPrice\n            );\n\n            if (!category) {\n                let selectedCategory = this.categories.find(\n                    (category) => category.value === this.selected.value\n                );\n                this.sortByCategories(selectedCategory);\n            }\n        },\n        addToCart(data) {\n            this.ADD_TO_CART(data); // Вызываем действие Vuex для добавления товара в корзину\n            this.showNotification = true;\n\n            const newItem = {\n                id: Date.now(),\n                data: data,\n            };\n            this.addedItems.push(newItem);\n\n            // Сохраняем корзину в локальном хранилище\n            localStorage.setItem('cart', JSON.stringify(this.CART));\n                    \n  \n            setTimeout(() => {\n                const index = this.addedItems.findIndex(item => item.id === newItem.id);\n                if (index !== -1) {\n                    this.addedItems.splice(index, 1);\n                }\n            }, 2000);\n        },\n        dismissNotification(itemId) {\n            this.addedItems = this.addedItems.filter((item) => item.id !== itemId);\n        },\n        handleSelect(option) {\n            this.selected = option;\n            this.sortByCategories(option);\n        },\n        search() {\n            this.sortByCategories(this.selected);\n        },\n    },\n    mounted() {\n        this.GET_PRODUCTS_FROM_API().then((response) => {\n            if (response.data) {\n                console.log(\"Products:\", this.PRODUCTS);\n                this.sortByCategories(this.selected);\n            }\n        });\n    },\n};\n</script>\n\n<style>\n.filters {\n    display: flex;\n    justify-content: space-between;\n}\n\n.range-slider {\n    width: 100%;\n    text-align: center;\n    position: relative;\n    \n}\n\n.range-slider svg,\n.range-slider input[type=\"range\"] {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    height: 2px;\n}\n\ninput[type=\"range\"]::-webkit-slider-thumb {\n    z-index: 2;\n    position: relative;\n    top: 2px;\n    margin-top: -7px;\n}\n\n.slide-right-enter-active {\n    transition: transform 0.3s ease-out;\n}\n\n.slide-right-enter {\n    transform: translateX(100%);\n}\n\n.slide-right-leave-active {\n    transition: transform 0.3s ease-in;\n}\n\n.slide-right-leave-to {\n    transform: translateX(100%);\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}